<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panda Clicker</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap');
        body {
            width: 100%;
            height: 100%; 
            margin: 0;
            overflow: hidden;
            user-select: none;
            background-image: url('./img/bgBamboo.png');
            font-family: "Roboto", Calibri;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            gap: 1vh;
        }
        
        img {
            image-rendering: pixelated;
        }

        #click:active img {
            transform: scale(0.95);
            transition: transform 0.05s;
        }
    </style>
</head>
<body>
    <div style="font-size:xx-large; color: white;" id="bamboo"><img src="./img/bamboo.png" width=32>0</div>
    <button id="click"><img src="./img/panda.png" width=200></button>
    <button id="upgrade_click">Upgrade Click: 101</button>
    <button id="upgrade_frequency">Upgrade frequency: 101</button>
    <button id="bamboo_miner">Bamboo Miner: 20</button>
    <button id="bamboo_extractor">Bamboo Extractor: 200</button>
    <script>
        let bamboo = parseInt(localStorage.getItem("bamboo")) || 0
        let clickAmount = parseInt(localStorage.getItem("clickAmount")) || 1
        let mineAmount = parseInt(localStorage.getItem("mineAmount")) || 0
        let extractAmount = parseInt(localStorage.getItem("extractAmount")) || 0
        let click = document.getElementById("click")
        let upgrade_click = document.getElementById("upgrade_click")
        let upgrade_frequency = document.getElementById("upgrade_frequency")
        let bamboo_miner = document.getElementById("bamboo_miner")
        let bamboo_extractor = document.getElementById("bamboo_extractor")
        let frequency = parseInt(localStorage.getItem("frequency")) || 500
        let frequency_amount = parseInt(localStorage.getItem("frequency_amount")) || 0

        function refresh() {
            localStorage.setItem("bamboo", bamboo)
            localStorage.setItem("clickAmount", clickAmount)
            localStorage.setItem("mineAmount", mineAmount)
            localStorage.setItem("extractAmount", extractAmount)
            localStorage.setItem("frequency", frequency)
            localStorage.setItem("frequency_amount", frequency_amount)
            document.getElementById("bamboo").innerHTML = `<img src="./img/bamboo.png" width=32>${bamboo == 69 ? "nice" : bamboo}`
            upgrade_click.innerHTML = "(" + (clickAmount - 1) + ") " + "Upgrade Click: $" + ((clickAmount ** 7) + 300)
            upgrade_frequency.innerHTML = "(" + (frequency_amount) + ") " + "Upgrade Frequency: $" + (((frequency_amount * 2) ** 7) + 1000)
            bamboo_miner.innerHTML = "(" + (mineAmount) + ") " + "Bamboo Miner: $" + (mineAmount ** 3 + 20)
            bamboo_extractor.innerHTML = "(" + (extractAmount / 2) + ") " + "Bamboo Extractor: $" + (extractAmount ** 4 + 400)
        }
        refresh()
        click.onclick = function(){
            bamboo += clickAmount
            refresh()
        }
        upgrade_click.onclick = function(){
            const cost = (clickAmount ** 7) + 300
            if (bamboo >= cost){
                bamboo -= cost
                clickAmount += 1
                refresh()
            }
        }
        upgrade_frequency.onclick = function(){
            const cost = ((frequency_amount * 2) ** 7) + 1000
            if (bamboo >= cost && frequency > 20){
                bamboo -= cost
                frequency_amount += 1
                frequency -= 50
                refresh()
            }
        }
        bamboo_miner.onclick = function(){
            const cost = mineAmount ** 3 + 20
            if (bamboo >= cost){
                bamboo -= cost
                mineAmount += 1
                refresh()
            }
        }
        bamboo_extractor.onclick = function(){
            const cost = extractAmount ** 4 + 400
            if (bamboo >= cost){
                bamboo -= cost
                extractAmount += 2
                refresh()
            }
        }
        setInterval(() => { 
            bamboo += mineAmount;
            bamboo += extractAmount;
            refresh();
        }, frequency);
    </script>
</body>
</html>